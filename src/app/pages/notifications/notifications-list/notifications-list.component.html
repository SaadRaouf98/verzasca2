<section>
  <div
    class="row justify-content-between align-items-center component-header mb-2"
  >
    <div class="col-12 col-lg-6 d-flex align-items-center | heading">
      <a class="cursor-pointer" (click)="goToLastPage()">
        <img
          src="assets/icons/right-arrow.png"
          alt="Navigation back."
          class="arrow-icon"
          [class.rotate-arrow]="lang === 'en'"
        />
      </a>

      <h1 class="component-header_title">
        {{ "shared.notifications" | translate }}
      </h1>
    </div>

    <div
      class="col-12 col-sm-6 d-flex justify-content-end align-items-center button-group-gap component-header_actions"
    >
      <button mat-raised-button (click)="onReadAll()">
        <mat-icon class="d-flex align-items-center">
          <img src="assets/icons/edit_square.png" />
        </mat-icon>
        {{ "shared.readAll" | translate }}
      </button>

      <button mat-raised-button (click)="onDeleteAll()">
        <mat-icon class="d-flex align-items-center">
          <img src="assets/icons/delete-square.png" />
        </mat-icon>
        {{ "shared.deleteAll" | translate }}
      </button>
    </div>
  </div>

  <ng-container *ngIf="!isLoading; else elseBlock">
    <div
      *ngFor="let notification of notifications"
      (click)="onGoToDetails(notification)"
      class="notification-item"
      [class.highlight]="!notification.seen"
    >
      <div class="notification-first-div">
        <div class="icon-container">
          <ng-container *ngIf="notification.seen; else elseBlock">
            <img *ngIf="!notification.seen" src="assets/icons/seen.png" />
          </ng-container>

          <ng-template #elseBlock>
            <img src="assets/icons/red-circle.png" />
          </ng-template>
        </div>

        <div class="text-container">
          <h3 class="title">
            {{ lang === "ar" ? notification.title : notification.titleEn }}
          </h3>
          <p
            class="text-gray-500 | message"
            [innerHTML]="
              lang === 'ar'
                ? notification.message.replaceAll('\\n', '\<br/>')
                : notification.message.replaceAll('\\n', '\<br/>')
            "
          ></p>
          <p class="text-gray-500 | date">
            {{ notification.date | date : "EEEE,  d MMMM y, h:mm a" }}
          </p>
        </div>
      </div>

      <!--       <div *ngIf="notification.content" class="notification-second-div">
        <a (click)="onGoToDetails(notification)">
          {{
            "NotificationsModule.NotificationsListComponent.goToSystem"
              | translate
          }}

          <img src="assets/icons/chevron-left.png" />
        </a>
      </div> -->
    </div>

    <div *ngIf="notifications.length" class="d-flex justify-content-end">
      <mat-paginator
        [length]="length"
        [pageIndex]="pageIndex"
        [pageSize]="pageSize"
        [pageSizeOptions]="[20, 30, 40, 50]"
        (page)="pageEvent = $event; onPaginationChange($event)"
        showFirstLastButtons
      >
      </mat-paginator>
    </div>
  </ng-container>

  <ng-template #elseBlock>
    <div
      class="d-flex justify-content-center align-items-center"
      style="width: 100%"
    >
      <mat-spinner [diameter]="50"></mat-spinner>
    </div>
  </ng-template>
</section>
