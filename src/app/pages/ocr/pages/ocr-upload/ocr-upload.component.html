<div
  class="d-flex"
  style="max-height: 100%"
  (dragend)="dragleft($event)"
  (dragenter)="dragentered($event)"
  (dragover)="preventDefault($event)"
  (drop)="fileDropped($event)"
>
  <input hidden (change)="onFileChange($event)" #hiddenFileToUpload type="file" accept=".pdf" />
  <div
    (dblclick)="onAddFile()"
    *ngIf="pdfSrc; else UploadAreaBlock"
    #pdfcontainer
    class="pdf-container"
  >
    <div *ngIf="error" class="error mb">
      {{ error.message | json }}
    </div>
    <pdf-viewer
      (page-rendered)="pageRendered($event)"
      [autoresize]="true"
      [src]="pdfSrc"
      style="display: block; height: 86vh"
      [original-size]="false"
      [render-text]="false"
      (error)="onError($event)"
    ></pdf-viewer>
  </div>

  <ng-template #UploadAreaBlock>
    <div class="upload-container">
      <div class="upload-area">
        <svg width="2.25rem" height="2.25rem" class="mb-3">
          <use [attr.xlink:href]="'assets/icons/sprite.svg#upload'"></use>
        </svg>
        <p class="body-bold primary-500 mb-2">{{ 'attachment.select' | translate }}</p>
        <p class="body text-small gray-700 mb-2" style="max-width: 65%">
          JPEG, PNG, PDG, and MP4 formats, up to 50MB
        </p>
        <button (click)="onAddFile()" class="button button-secondary button-md custom-width">
          {{ 'attachment.upload' | translate }}
        </button>
      </div>
    </div>
  </ng-template>

  <div class="text-container">
    <svg width="5.5rem" height="5.5rem">
      <use [attr.xlink:href]="'assets/icons/sprite.svg#ocr'"></use>
    </svg>
    <ng-container *ngIf="parsedResponse && parsedResponse.length > 0">
      <div class="editor-wrapper">
        <editor
          #tinyEditor
          apiKey="p8tdskaf56ahgll1mjpgn2hplljfpzlcsnznspomz2xc3qsr"
          [initialValue]="editorContent"
          (onInit)="onEditorInit($event)"
          [init]="{
            toolbar:
              'undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table mergetags | addcomment showcomments | spellcheckdialog a11ycheck typography | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat',
            height: '90vh',
            menubar: false,
            content_style:
              '.Section-header { font-size: 1.25rem; font-weight: 700; margin: 1rem 0; } .Text { font-size: 1rem; font-weight: 400; margin: 0.5rem 0; }'
          }"
        >
        </editor>
      </div>
    </ng-container>
    <div style="display: none">
      <mat-form-field class="example-full-width">
        <input matInput placeholder="Number" [formControl]="numberControl" />
      </mat-form-field>
    </div>
    <div style="display: none">{{ numText }}</div>
    <canvas #dcanvas height="1400" width="1400" style="display: none"></canvas>
  </div>
  <div
    *ngIf="isLoading"
    style="
      display: flex;
      position: absolute;
      width: 100%;
      height: 100%;
      background-color: rgba(100, 100, 100, 0.4);
    "
  >
    <div style="margin: auto">
      <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
    </div>
  </div>
</div>
