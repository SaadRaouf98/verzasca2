<div class="pdf-viewer-wrapper">
  <!-- Toolbar shown only for 'viewer' -->
  <div *ngIf="safeSrc && previewType === 'viewer'" class="toolbar">
    <button (click)="prevPage()" [disabled]="page <= 1">â¬…ï¸ Prev</button>
    <span>Page {{ page }} / {{ totalPages }}</span>
    <button (click)="nextPage()" [disabled]="page >= totalPages">
      Next â¡ï¸
    </button>
    <button (click)="zoomOut()">ğŸ”â–</button>
    <span>{{ zoom.toFixed(1) }}x</span>
    <button (click)="zoomIn()">ğŸ”â•</button>
  </div>

  <div *ngIf="loading" class="spinner">{{ loading }}Loading PDF...</div>

  <!-- Mode 1: Native browser preview using iframe -->
  <iframe
    *ngIf="safeSrc && previewType === 'iframe'"
    [src]="safeSrc"
    width="100%"
    height="100vh"
    frameborder="0"
    style="min-height: 100vh"
    (load)="onIframeLoaded()"
    (error)="onError($event)"
  ></iframe>

  <!-- Mode 2: Custom PDF viewer using ng2-pdf-viewer -->
  <pdf-viewer
    *ngIf="safeSrc && previewType === 'viewer'"
    [src]="src"
    [page]="page"
    [zoom]="zoom"
    [show-all]="true"
    [original-size]="true"
    (after-load-complete)="onPdfLoaded($event)"
    (error)="onError($event)"
    [render-text]="true"
    style="width: 100%; height: 100vh"
  ></pdf-viewer>
</div>
